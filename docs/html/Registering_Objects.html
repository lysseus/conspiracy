<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4&nbsp;Registering Objects</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Conspiracy Library</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="The_Database.html" class="tocviewlink" data-pltdoc="x">The Database</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Messaging_Objects.html" class="tocviewlink" data-pltdoc="x">Messaging Objects</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Registering_Objects.html" class="tocviewselflink" data-pltdoc="x">Registering Objects</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Special_Properties.html" class="tocviewlink" data-pltdoc="x">Special Properties</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Special_Property_Values.html" class="tocviewlink" data-pltdoc="x">Special Property Values</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Pseudo-Variables.html" class="tocviewlink" data-pltdoc="x">Pseudo-<wbr></wbr>Variables</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Inheritance.html" class="tocviewlink" data-pltdoc="x">Inheritance</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Templates.html" class="tocviewlink" data-pltdoc="x">Templates</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Object.html" class="tocviewlink" data-pltdoc="x">Object</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Characteristics_Object.html" class="tocviewlink" data-pltdoc="x">Characteristics Object</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Nothing_Object.html" class="tocviewlink" data-pltdoc="x">Nothing Object</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Rule_Object.html" class="tocviewlink" data-pltdoc="x">Rule Object</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>4&nbsp;</td><td><a href="Registering_Objects.html" class="tocviewselflink" data-pltdoc="x">Registering Objects</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="Registering_Objects.html#%28part._.Object_.Definition%29" class="tocviewlink" data-pltdoc="x">Object Definition</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="Registering_Objects.html#%28part._.Anonymous_.Definition%29" class="tocviewlink" data-pltdoc="x">Anonymous Definition</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="Registering_Objects.html#%28part._.Object_.Replacement%29" class="tocviewlink" data-pltdoc="x">Object Replacement</a></td></tr><tr><td align="right">4.4&nbsp;</td><td><a href="Registering_Objects.html#%28part._.Object_.Modification%29" class="tocviewlink" data-pltdoc="x">Object Modification</a></td></tr><tr><td align="right">4.5&nbsp;</td><td><a href="Registering_Objects.html#%28part._.Object_.Removal%29" class="tocviewlink" data-pltdoc="x">Object Removal</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.Object_.Definition%29" class="tocsubseclink" data-pltdoc="x">Object Definition</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._.Anonymous_.Definition%29" class="tocsubseclink" data-pltdoc="x">Anonymous Definition</a></td></tr><tr><td><span class="tocsublinknumber">4.2.1<tt>&nbsp;</tt></span><a href="#%28part.___%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">%*</span></a></td></tr><tr><td><span class="tocsublinknumber">4.2.2<tt>&nbsp;</tt></span><a href="#%28part.__%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">&#964;</span></a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._.Object_.Replacement%29" class="tocsubseclink" data-pltdoc="x">Object Replacement</a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._.Object_.Modification%29" class="tocsubseclink" data-pltdoc="x">Object Modification</a></td></tr><tr><td><span class="tocsublinknumber">4.4.1<tt>&nbsp;</tt></span><a href="#%28part._.Replacing_.Properties%29" class="tocsubseclink" data-pltdoc="x">Replacing Properties</a></td></tr><tr><td><span class="tocsublinknumber">4.4.2<tt>&nbsp;</tt></span><a href="#%28part._.Removing_.Properties%29" class="tocsubseclink" data-pltdoc="x">Removing Properties</a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#%28part._.Object_.Removal%29" class="tocsubseclink" data-pltdoc="x">Object Removal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.4</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Messaging_Objects.html" title="backward to &quot;3 Messaging Objects&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Conspiracy Library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Special_Properties.html" title="forward to &quot;5 Special Properties&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>4<tt>&nbsp;</tt><a name="(part._.Registering_.Objects)"></a>Registering Objects</h3><p>Initially the objects database only contains <span class="stt">Object</span>. In this section we briefly go over the ways that the database can be changed through four forms of registration</p><h4>4.1<tt>&nbsp;</tt><a name="(part._.Object_.Definition)"></a>Object Definition</h4><p>Registers an object in the objects database. Returns the object name.</p><p><span style="font-weight: bold">Syntax:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">%</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">objname</span><span class="stt">] </span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: (and/c symbol? (not </span><span class="stt">object?</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: (</span><span style="font-weight: bold">flags</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">kinds</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">implements</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body0 body ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-weight: bold">(</span><span class="stt">value ...</span><span style="font-weight: bold">)</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">value)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket &#955; kw-formal</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket function contract</span></p></td></tr></table></p><p>When <span style="font-style: italic">objname</span> is not provided the library will generate a name from a gensym prefixed with &rsquo;obj# that is then interned for referencing.</p><p>Properties will be discussed further in separate sections.</p><p><span style="font-weight: bold">Examples:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (%)</span></p></td></tr><tr><td><p><span class="stt">'obj#2125281</span></p></td></tr><tr><td><p><span class="stt">&gt; (% A (sqr (n) (-&gt; integer? integer?) (sqr n)))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ sqr A 25)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">Library/Mobile Documents/com~apple~CloudDocs/Racket/utils/conspiracy/object.rkt:801:5: @: contract violation</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">expected: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">given: #&lt;procedure:sqr&gt;</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ 'sqr A 25)</span></p></td></tr><tr><td><p><span class="stt">625</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(sqr #&lt;procedure:...nspiracy/object.rkt:270:42&gt;))</span></p></td></tr></table></p><h4>4.2<tt>&nbsp;</tt><a name="(part._.Anonymous_.Definition)"></a>Anonymous Definition</h4><p>Registers an &rsquo;anonymous&rsquo; object in the objects database. Returns the object name. This is an alternative form of the <span class="stt">%</span> &rsquo;anonymous&rsquo; definition above.</p><h5>4.2.1<tt>&nbsp;</tt><a name="(part.___)"></a><span class="stt">%*</span></h5><p><span style="font-weight: bold">Syntax:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">%*</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: (</span><span style="font-weight: bold">flags</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">implements</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body0 body ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-weight: bold">(</span><span class="stt">value ...</span><span style="font-weight: bold">)</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">value)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket &#955; kw-formal</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket function contract</span></p></td></tr></table></p><p>This syntax is a shorter version of the anonymous variation of <span class="stt">%</span>, but the results are the same. Note that <span class="stt">kinds</span> is not a valid property in this syntax.</p><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (p0 0))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (p1 10))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (%* A B (p2 20))</span></p></td></tr><tr><td><p><span class="stt">'obj#26607112</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show obj#26607112 #:flag +kinds)</span></p></td></tr><tr><td><p><span class="stt">(% obj#26607112</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (A B))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p2 20))</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 0))</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p1 10))</span></p></td></tr><tr><td><p><span class="stt">&gt; (%*)</span></p></td></tr><tr><td><p><span class="stt">'obj#26628183</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show obj#26628183)</span></p></td></tr><tr><td><p><span class="stt">(% obj#26628183</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (%* B A (p42 42) (kinds A B))</span></p></td></tr><tr><td><p><span class="stt">obj#26671717: kinds property not valid in definition.</span></p></td></tr><tr><td><p><span class="stt">&gt; (%* B A (p42 42))</span></p></td></tr><tr><td><p><span class="stt">'obj#26672992</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show obj#26672992 +kinds)</span></p></td></tr><tr><td><p><span class="stt">(% obj#26672992</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (B A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p42 42))</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p1 10))</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr></table></div></p><h5>4.2.2<tt>&nbsp;</tt><a name="(part.__)"></a><span class="stt">&#964;</span></h5><p>Anonymous object syntax especially useful for objects designed to behave as &rsquo;templates&rsquo;.</p><p><div class="SIntrapara"><span style="font-weight: bold">Syntax:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">&#964;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...] property ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">= </span><span style="font-style: italic">propname</span><span class="stt">: val [val ...]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: symbol?</span></p></td></tr></table></div></p><p><div class="SIntrapara"><span style="font-weight: bold">Note:</span>
</div><div class="SIntrapara"><ul><li><p>property names are identified by the <span style="font-style: italic">:</span> suffix.</p></li><li><p><span class="stt">kinds</span> is not a valid property in this form.</p></li><li><p>A single value will produce a propname/value pair. Any properties requiring a list will neeed to have the value wrapped in a list function. This applies to special properties <span class="stt">flags</span> and <span class="stt">implements</span> as well.</p></li></ul></div></p><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A)</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (&#964; A)</span></p></td></tr><tr><td><p><span class="stt">'obj#15994270</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show obj#15994270)</span></p></td></tr><tr><td><p><span class="stt">(% obj#15994270</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (A)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (&#964; A p0: foo p1: bar baz p2: x y z)</span></p></td></tr><tr><td><p><span class="stt">'obj#16020613</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show obj#16020613)</span></p></td></tr><tr><td><p><span class="stt">(% obj#16020613</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 foo)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p1 (bar baz))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p2 (x y z)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (&#964; A p0: (list foo))</span></p></td></tr><tr><td><p><span class="stt">'obj#16030671</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show obj#16030671)</span></p></td></tr><tr><td><p><span class="stt">(% obj#16030671</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 (foo)))</span></p></td></tr></table></div></p><h4>4.3<tt>&nbsp;</tt><a name="(part._.Object_.Replacement)"></a>Object Replacement</h4><p>Replaces an object in the objects database.</p><p><span style="font-weight: bold">Syntax:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">%=</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: (</span><span style="font-weight: bold">flags</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">kinds</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">implements</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body0 body ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-weight: bold">(</span><span class="stt">value ...</span><span style="font-weight: bold">)</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">value)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: object?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket &#955; kw-formal</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket function contract</span></p></td></tr></table></p><p>Properties will be discussed further in separate sections.</p><p><span style="font-weight: bold">Examples:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A)</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (%= A (p0 42))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 42))</span></p></td></tr></table></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags immutable))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (! p0 A 10)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">!: contract violation</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">expected: mutable-object?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">given: 'A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">in: the 2nd argument of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-&gt; symbol? mutable-object? any/c any)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">contract from: (function !)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">blaming: &lt;pkgs&gt;/conspiracy/object.rkt</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(assuming the contract is correct)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">at: &lt;pkgs&gt;/conspiracy/object.rkt:784.18</span></p></td></tr><tr><td><p><span class="stt">&gt; (%=</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">A (p0 42))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (! p0 A 10)</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 10))</span></p></td></tr></table></p><h4>4.4<tt>&nbsp;</tt><a name="(part._.Object_.Modification)"></a>Object Modification</h4><p>Modifies an object in the objects database.</p><p><span style="font-weight: bold">Syntax:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">%+</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: (</span><span style="font-weight: bold">flags</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">kinds</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-weight: bold">implements</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|(</span><span style="font-weight: bold">remove</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|(</span><span style="font-weight: bold">replace</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body0 body ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-weight: bold">(</span><span class="stt">value ...</span><span style="font-weight: bold">)</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| (</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">value)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ntf</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: symbol?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">argspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket &#955; kw-formal</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">ctcspec</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: Racket function contract</span></p></td></tr></table></p><p>Properties will be discussed further in separate sections.</p><p><div class="SIntrapara">Modification is a registration process that is more complicated than replacement. During modification the following steps occur:
</div><div class="SIntrapara"><ul><li><p>The directly-defined properties of the object are registered as a new <span style="font-style: italic">modobject</span> whose object name is a gensym prefixed by &rsquo;mod# and then interned for referencing.</p></li><li><p>The property clauses of <span class="stt">%+</span> become the object&rsquo;s directly-defined property list, with the addition of a <span class="stt">kinds</span> property pointing to the <span style="font-style: italic">modobject</span>.</p></li><li><p>Any <span class="stt">replace</span> property values are removed from the <span style="font-style: italic">modobject</span> and added to the object&rsquo;s directly-defined property list.</p></li><li><p>Any <span class="stt">remove</span> property values are removed from the object and its modifications.</p></li><li><p>The object&rsquo;s <span class="stt">construct</span> property is called.</p></li></ul></div></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&gt; (%+ Object (p0 42))</span></p></td></tr><tr><td><p><span class="stt">object-modify: contract violation</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">expected: mutable-object?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">given: 'Object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">in: the 1st argument of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-&gt;*</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(mutable-object?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(non-empty-listof</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons/c</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(and/c symbol? (not/c 'kinds))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">any/c)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(#:construct? boolean?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">symbol?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">contract from: (function object-modify)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">blaming: &lt;pkgs&gt;/conspiracy/object.rkt</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(assuming the contract is correct)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">at: &lt;pkgs&gt;/conspiracy/object.rkt:449.18</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></p><h5>4.4.1<tt>&nbsp;</tt><a name="(part._.Replacing_.Properties)"></a>Replacing Properties</h5><p>When it is desirable to remove a property from an object&rsquo;s modifications, providing a new version in its directly-defined properties we can accomplish this with the <span class="stt">replace</span> property. The syntax of which is:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">replace</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">property</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr></table></p><p>As we&rsquo;ll see later in discussions on inheritance, this will allow a method to pass control along the object&rsquo;s original <span class="stt">kind-order</span>.</p><p>Examples:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (p0 0))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (p0 1))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (p0 2))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (replace (p0 3)))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A #:flag +mods)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (mod#2864351))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 3))</span></p></td></tr><tr><td><p><span class="stt">(% mod#2864351</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (mod#2864205)))</span></p></td></tr><tr><td><p><span class="stt">(% mod#2864205</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (mod#2864132)))</span></p></td></tr><tr><td><p><span class="stt">(% mod#2864132</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr></table></p><h5>4.4.2<tt>&nbsp;</tt><a name="(part._.Removing_.Properties)"></a>Removing Properties</h5><p>In object modification a property can be removed from its modifications using a property with the following syntax:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">remove</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">propname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr></table></p><p>Examples:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (p0 0))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (p1 1))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (p2 2))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (remove p0))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A #:flag +mods)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (mod#2907069)))</span></p></td></tr><tr><td><p><span class="stt">(% mod#2907069</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (mod#2906919))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p2 2))</span></p></td></tr><tr><td><p><span class="stt">(% mod#2906919</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (mod#2906855))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p1 1))</span></p></td></tr><tr><td><p><span class="stt">(% mod#2906855</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr></table></p><h4>4.5<tt>&nbsp;</tt><a name="(part._.Object_.Removal)"></a>Object Removal</h4><p>Removes an object and its derivations and modifications from the objects database. Returns a list of all objects removed.</p><p><span style="font-weight: bold">Syntax:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">%-</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span></p></td></tr></table></p><p><span style="font-weight: bold">Examples:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A)</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ A (p0 42))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (kinds A) (p0 100))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (%- A)</span></p></td></tr><tr><td><p><span class="stt">'(B A mod#2493110)</span></p></td></tr></table></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Messaging_Objects.html" title="backward to &quot;3 Messaging Objects&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Conspiracy Library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Special_Properties.html" title="forward to &quot;5 Special Properties&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>