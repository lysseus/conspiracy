<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5&nbsp;Special Properties</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Conspiracy Library</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="The_Database.html" class="tocviewlink" data-pltdoc="x">The Database</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Messaging_Objects.html" class="tocviewlink" data-pltdoc="x">Messaging Objects</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Registering_Objects.html" class="tocviewlink" data-pltdoc="x">Registering Objects</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Special_Properties.html" class="tocviewselflink" data-pltdoc="x">Special Properties</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Special_Property_Values.html" class="tocviewlink" data-pltdoc="x">Special Property Values</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Pseudo-Variables.html" class="tocviewlink" data-pltdoc="x">Pseudo-<wbr></wbr>Variables</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Inheritance.html" class="tocviewlink" data-pltdoc="x">Inheritance</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Templates.html" class="tocviewlink" data-pltdoc="x">Templates</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Object.html" class="tocviewlink" data-pltdoc="x">Object</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Characteristics_Object.html" class="tocviewlink" data-pltdoc="x">Characteristics Object</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Nothing_Object.html" class="tocviewlink" data-pltdoc="x">Nothing Object</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Rule_Object.html" class="tocviewlink" data-pltdoc="x">Rule Object</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>5&nbsp;</td><td><a href="Special_Properties.html" class="tocviewselflink" data-pltdoc="x">Special Properties</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="Special_Properties.html#%28part._.Flags%29" class="tocviewlink" data-pltdoc="x">Flags</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="Special_Properties.html#%28part._.Kinds%29" class="tocviewlink" data-pltdoc="x">Kinds</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="Special_Properties.html#%28part._implements%29" class="tocviewlink" data-pltdoc="x">implements</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">5.1<tt>&nbsp;</tt></span><a href="#%28part._.Flags%29" class="tocsubseclink" data-pltdoc="x">Flags</a></td></tr><tr><td><span class="tocsublinknumber">5.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Interrogating_.Flags%29" class="tocsubseclink" data-pltdoc="x">Interrogating Flags</a></td></tr><tr><td><span class="tocsublinknumber">5.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Library_.Flags%29" class="tocsubseclink" data-pltdoc="x">Library Flags</a></td></tr><tr><td><span class="tocsublinknumber">5.1.2.1<tt>&nbsp;</tt></span><a href="#%28part._immutable%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">immutable</span></a></td></tr><tr><td><span class="tocsublinknumber">5.1.2.2<tt>&nbsp;</tt></span><a href="#%28part._no-assert%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">no-<wbr></wbr>assert</span></a></td></tr><tr><td><span class="tocsublinknumber">5.1.2.3<tt>&nbsp;</tt></span><a href="#%28part._prop-not-defined%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">prop-<wbr></wbr>not-<wbr></wbr>defined</span></a></td></tr><tr><td><span class="tocsublinknumber">5.1.2.4<tt>&nbsp;</tt></span><a href="#%28part.__-props%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">ε-<wbr></wbr>props</span></a></td></tr><tr><td><span class="tocsublinknumber">5.1.2.5<tt>&nbsp;</tt></span><a href="#%28part.__-props%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">ι-<wbr></wbr>props</span></a></td></tr><tr><td><span class="tocsublinknumber">5.1.2.6<tt>&nbsp;</tt></span><a href="#%28part.__-props%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">μ-<wbr></wbr>props</span></a></td></tr><tr><td><span class="tocsublinknumber">5.2<tt>&nbsp;</tt></span><a href="#%28part._.Kinds%29" class="tocsubseclink" data-pltdoc="x">Kinds</a></td></tr><tr><td><span class="tocsublinknumber">5.2.1<tt>&nbsp;</tt></span><a href="#%28part._object_%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">object?</span></a></td></tr><tr><td><span class="tocsublinknumber">5.2.2<tt>&nbsp;</tt></span><a href="#%28part._default-kind%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">default-<wbr></wbr>kind</span></a></td></tr><tr><td><span class="tocsublinknumber">5.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Inheritance_.Order%29" class="tocsubseclink" data-pltdoc="x">Inheritance Order</a></td></tr><tr><td><span class="tocsublinknumber">5.3<tt>&nbsp;</tt></span><a href="#%28part._implements%29" class="tocsubseclink" data-pltdoc="x">implements</a></td></tr><tr><td><span class="tocsublinknumber">5.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Implementing_.Interface_.Objects%29" class="tocsubseclink" data-pltdoc="x">Implementing Interface Objects</a></td></tr><tr><td><span class="tocsublinknumber">5.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Implementing__-props_objects%29" class="tocsubseclink" data-pltdoc="x">Implementing ε-<wbr></wbr>props objects</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.4</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Registering_Objects.html" title="backward to &quot;4 Registering Objects&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Conspiracy Library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Special_Property_Values.html" title="forward to &quot;6 Special Property Values&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>5<tt>&nbsp;</tt><a name="(part._.Special_.Properties)"></a>Special Properties</h3><p>Conspiracy properties are pairs of property name and value, but certain property names are &rsquo;special&rsquo; in that they play a role in registration, inheritance, mutability, undefined property handling, and interfaces.</p><h4>5.1<tt>&nbsp;</tt><a name="(part._.Flags)"></a>Flags</h4><p>The <span class="stt">flags</span> property has special usage within the library, as will be discussed below, and also has an unusual property syntax.</p><p><div class="SIntrapara"><span style="font-weight: bold">Syntax:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">flags</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: symbol?</span></p></td></tr></table></div></p><p>The property&rsquo;s value is a list, and it can be defined as above, or in the usual ways that lists are represented:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags x y z))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (flags '(x y z)))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (flags (x y z)))</span></p></td></tr><tr><td><p><span class="stt">'C</span></p></td></tr><tr><td><p><span class="stt">&gt; (% D (flags (list x y z)))</span></p></td></tr><tr><td><p><span class="stt">'D</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(flags (x y z))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show B)</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(flags (x y z))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show C)</span></p></td></tr><tr><td><p><span class="stt">(% C</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(flags (x y z))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show D)</span></p></td></tr><tr><td><p><span class="stt">(% D</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(flags (x y z))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr></table></p><h5>5.1.1<tt>&nbsp;</tt><a name="(part._.Interrogating_.Flags)"></a>Interrogating Flags</h5><p>The flags mechanism in Conspiracy can be thought of as asking a question pertaining to the object. The flag is only relevant if the object directly-defines it. Flag interrogation is not inherited. Flags can be thought of as boolean values: their presence indicating true, their absence false.</p><p>The object message <span class="stt">flags?</span> is used to interrogate the <span class="stt">flags</span> property of an object. This message constrains the values to the directly-defined properties of the object, ignoring whether the object might inherit the flags property from other objects.</p><p><span style="font-weight: bold">syntax</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(|</span><span style="font-weight: bold">@</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-weight: bold">flags?</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span class="stt">#:al</span><span class="stt">] </span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">objname</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="stt">#:all</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: boolean?</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">flag</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: symbol?</span></p></td></tr></table></p><p>The <span class="stt">#:all</span> boolean is #t by default. In that case the object must have all of the flags set in order for <span class="stt">flags?</span> to return true. When <span class="stt">#:all</span> is #f any flag match will cause <span class="stt">flags?</span> to return #t.</p><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags immutable x y z))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ flags? A immutable)</span></p></td></tr><tr><td><p><span class="stt">#t</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ flags? A w x y)</span></p></td></tr><tr><td><p><span class="stt">#f</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ flags? A #:all #f w x y)</span></p></td></tr><tr><td><p><span class="stt">#t</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (kinds A))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ flags? B immutable)</span></p></td></tr><tr><td><p><span class="stt">#f</span></p></td></tr></table></div></p><h5>5.1.2<tt>&nbsp;</tt><a name="(part._.Library_.Flags)"></a>Library Flags</h5><p>While any symbol can serve as a flag (even an object name), the library makes use of a handful of symbols for answering questions like:</p><ul><li><p>Is the object immutable?</p></li><li><p>Does the object want to handle undefined properties itself?</p></li><li><p>Does the object want to bypass asserting an interface it implements?</p></li><li><p>Should any object that <span class="stt">implements</span> this object treat it as an &#956;-props rather than an &#953;-props?</p></li></ul><h5>5.1.2.1<tt>&nbsp;</tt><a name="(part._immutable)"></a><span class="stt">immutable</span></h5><p>By default Conspiracy objects are mutable.</p><p>Immutable objects cannot have their property values set with the <span class="stt">!</span> operator.</p><p>Objects are defined immutable by registering them with an <span class="stt">immutable</span> flag. Once this is done their <span style="font-style: italic">directly-defined</span> property values cannot be modified (unless they are of a datatype that is itself mutable and referenced elsewhere.)</p><h5>5.1.2.2<tt>&nbsp;</tt><a name="(part._no-assert)"></a><span class="stt">no-assert</span></h5><p>By default an object that <span class="stt">implements</span> an interface asserts that the requirements of that interface during its construction. But there are times when you may wish to define an object that implements an interface which is only asserted by its derivations. In this manner you can simulate a template or class behavior.</p><p>By giving the object the <span class="stt">no-assert</span> flag you tell the library that it must not enforce any directly-defined or inherited <span class="stt">&#953;-props</span> or <span class="stt">&#956;-props</span> interfaces.</p><p><span style="font-weight: bold">Examples:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (p0 number?))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (implements A))</span></p></td></tr><tr><td><p><span class="stt">B does not implement A &#953;-props property (? p0 B) -&gt; #&lt;procedure:number?&gt;.</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (flags no-assert)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(implements A))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="refelem"><span class="refcolumn"><span class="refcontent"><span style="font-style: italic">B</span> is not a template-object, which requires the <span class="stt">immutable</span> flag as well as <span class="stt">no-assert</span>.</span></span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show B)</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(flags (no-assert))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(implements (A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (kinds B) (p0 foo))</span></p></td></tr><tr><td><p><span class="stt">C does not implement A &#953;-props property p0 -&gt;:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Expected: #&lt;procedure:number?&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Actual: foo</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (kinds B)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 42))</span></p></td></tr><tr><td><p><span class="stt">'C</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show C)</span></p></td></tr><tr><td><p><span class="stt">(% C</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (B))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 42))</span></p></td></tr></table></p><h5>5.1.2.3<tt>&nbsp;</tt><a name="(part._prop-not-defined)"></a><span class="stt">prop-not-defined</span></h5><p>The flag value <span class="stt">prop-not-defined</span> tells the library to redirect any application operation to the object&rsquo;s <span class="stt">prop-not-defined</span> method. This method can be directly-defined or inherited by the object, but the redirecting of undefined messages applies only when the object for whom the message is undefined provides the flag.</p><p><span style="font-weight: bold">Examples:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% B)</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ foo B)</span></p></td></tr><tr><td><p><span class="stt">#&lt;undefined&gt;</span></p></td></tr><tr><td><p><span class="stt">&gt; (%+ B (flags prop-not-defined)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(prop-not-defined vals (-&gt;* () #:rest list? any) #f))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ foo B)</span></p></td></tr><tr><td><p><span class="stt">#f</span></p></td></tr></table></p><p>In the example above, B does not define or inherit a <span style="font-style: italic">foo</span> property. The library default returns <span class="stt">undefined</span> in that situation. We could use the #:when-undefined keyword on the <span class="stt">@</span> call, but in this case the object has been modified to handle undefined properties itself.</p><h5>5.1.2.4<tt>&nbsp;</tt><a name="(part.__-props)"></a><span class="stt">&#949;-props</span></h5><p>An object can be designated an &rsquo;&#949;-props&rsquo; with the <span class="stt">&#949;-props</span> flag (&#949;-props will be discussed in further detail in the <span class="stt">implements</span> property section.)</p><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags &#949;-props) (p0 undefined))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (implements A) (p0 42))</span></p></td></tr><tr><td><p><span class="stt">B must not define &#949;-props A property p0</span></p></td></tr></table></div></p><h5>5.1.2.5<tt>&nbsp;</tt><a name="(part.__-props)"></a><span class="stt">&#953;-props</span></h5><p>An object can be designated an &#953;-props interface with the <span class="stt">&#953;-props</span> flag (&#953;-props will be discussed in further detail in the <span class="stt">implements</span> property section.</p><h5>5.1.2.6<tt>&nbsp;</tt><a name="(part.__-props)"></a><span class="stt">&#956;-props</span></h5><p>An object can be designated an &#956;-props interface with the <span class="stt">&#956;-props</span> flag (&#956;-props will be discussed in further detail in the <span class="stt">implements</span> property section.)</p><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags &#956;-props)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 42))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (implements A))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show B)</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(implements (A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 42))</span></p></td></tr></table></div></p><h4>5.2<tt>&nbsp;</tt><a name="(part._.Kinds)"></a>Kinds</h4><p>The <span class="stt">kinds</span> property has special usage within the library, as will be discussed below, and also has an unusual property syntax.</p><p><div class="SIntrapara"><span style="font-weight: bold">Syntax:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span><span style="font-weight: bold">kinds</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="font-style: italic">kind</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: </span><span class="stt">object?</span></p></td></tr></table></div></p><p>The property&rsquo;s value is a list, and it can be defined as above, or in the usual ways that lists are represented:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A)</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B)</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (kinds A B))</span></p></td></tr><tr><td><p><span class="stt">'C</span></p></td></tr><tr><td><p><span class="stt">&gt; (% D (kinds '(B A)))</span></p></td></tr><tr><td><p><span class="stt">'D</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show C)</span></p></td></tr><tr><td><p><span class="stt">(% C</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (A B)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show D)</span></p></td></tr><tr><td><p><span class="stt">(% D</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (B A)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (% E (kinds (C D)))</span></p></td></tr><tr><td><p><span class="stt">'E</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show E)</span></p></td></tr><tr><td><p><span class="stt">(% E</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (C D)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (% F (kinds (list D E)))</span></p></td></tr><tr><td><p><span class="stt">'F</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show F)</span></p></td></tr><tr><td><p><span class="stt">(% F</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (D E)))</span></p></td></tr></table></p><p>In Conspiracy an object represents a &rsquo;kind&rsquo; of thing. The <span class="stt">kinds</span> property is perhaps one of the most important that can be defined for an object as it determines from which existing objects the new one will inherit.</p><h5>5.2.1<tt>&nbsp;</tt><a name="(part._object_)"></a><span class="stt">object?</span></h5><p>The library defines the <span class="stt">object?</span> predicate as any symbol registered as an object name in the objects database.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (kinds B))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">Library/Mobile Documents/com~apple~CloudDocs/Racket/utils/conspiracy/object.rkt:384:11: make-object: contract violation</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">expected: (or/c (cons/c (quote kinds) (non-empty-listof (or/c (quote Object) (and/c (not/c (quote A)) object?)))) (cons/c (and/c symbol? (not/c (quote kinds))) any/c))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">given: '(kinds B)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">in: an element of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">the ps argument of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-&gt;i</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((name</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(or/c</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#f</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(and/c symbol? (not/c object?))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ps</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(name)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(listof</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(or/c</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons/c 'kinds (non-empty-listof ...))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons/c (and/c symbol? ...) any/c)))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(#:construct? (call () boolean?))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(result symbol?))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">contract from: (function make-object)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">blaming: &lt;pkgs&gt;/conspiracy/object.rkt</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(assuming the contract is correct)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">at: &lt;pkgs&gt;/conspiracy/object.rkt:397.18</span></p></td></tr></table></div><div class="SIntrapara">Initially the library bootstraps <span class="stt">Object</span> as a valid <span style="font-style: italic">kind</span> as well.</div></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A)</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (object? A)</span></p></td></tr><tr><td><p><span class="stt">#t</span></p></td></tr><tr><td><p><span class="stt">&gt; (object? B)</span></p></td></tr><tr><td><p><span class="stt">#f</span></p></td></tr></table></p><h5>5.2.2<tt>&nbsp;</tt><a name="(part._default-kind)"></a><span class="stt">default-kind</span></h5><p>Objects that do not specify a <span class="stt">kinds</span> property in their definition are provided with one that uses the object(s) specified by the default-kind macro. Initially this value is set to &rsquo;Object, but it can be changed using the <span class="stt">default-kind!</span> macro.</p><p><div class="SIntrapara"><span style="font-weight: bold">Examples</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; default-kind</span></p></td></tr><tr><td><p><span class="stt">'Object</span></p></td></tr><tr><td><p><span class="stt">&gt; (% A)</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B)</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (default-kind! A B)</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C)</span></p></td></tr><tr><td><p><span class="stt">'C</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show A)</span></p></td></tr><tr><td><p><span class="stt">(% A</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show B)</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show C)</span></p></td></tr><tr><td><p><span class="stt">(% C</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (A B)))</span></p></td></tr><tr><td><p><span class="stt">&gt; default-kind</span></p></td></tr><tr><td><p><span class="stt">'(A B)</span></p></td></tr></table></div></p><h5>5.2.3<tt>&nbsp;</tt><a name="(part._.Inheritance_.Order)"></a>Inheritance Order</h5><p>The ordering of <span class="stt">kinds</span>, like the naming of cats, is very important, as we&rsquo;ll learn in the section on inheritance. In the examples above the <span class="stt">kinds</span> property for C shows the order &rsquo;(A B), which would be very different in terms of inheritance from &rsquo;(B A). More on that later.</p><h4>5.3<tt>&nbsp;</tt><a name="(part._implements)"></a>implements</h4><p>The <span class="stt">implements</span> property allows an object to implement an interface: <span class="stt">&#953;-props</span>, <span class="stt">&#956;-props</span> or <span class="stt">&#949;-props</span>.</p><h5>5.3.1<tt>&nbsp;</tt><a name="(part._.Implementing_.Interface_.Objects)"></a>Implementing Interface Objects</h5><p><div class="SIntrapara">The following should be kept in mind:
</div><div class="SIntrapara"><ul><li><p>Interface assertion occurs at object registration. Objects are used to specify the interface. Any changes to an interface object after the object&rsquo;s registration do not affect the implementing object.</p></li><li><p>If an error occurs in the assertion of an interface during object registration, the object definition is rolled back.</p></li><li><p>an object definition can choose not to assert <span class="stt">&#953;-props</span> and <span class="stt">&#956;-props</span> interfaces during its construction using the <span class="stt">no-assert</span> flag.</p></li><li><p>Interfaces are inherited. An object&rsquo;s inheritance of interfaces follows its <span class="stt">kind-order</span></p></li><li><p>An implementation can be removed from an object&rsquo;s inheritance through use of the <span class="stt">~</span> prefixed to the interface object name.</p></li></ul></div></p><p><span style="font-weight: bold">Examples:</span></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags &#956;-props)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 14))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (implements A) (flags no-assert))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show B)</span></p></td></tr><tr><td><p><span class="stt">(% B</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(flags (no-assert))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(implements (A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (Object)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (kinds B))</span></p></td></tr><tr><td><p><span class="stt">'C</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show C)</span></p></td></tr><tr><td><p><span class="stt">(% C</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (B))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p0 14))</span></p></td></tr><tr><td><p><span class="stt">&gt; (% D (kinds C) (implements ~A))</span></p></td></tr><tr><td><p><span class="stt">'D</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show D)</span></p></td></tr><tr><td><p><span class="stt">(% D</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(implements (~A))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (C)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (% E (kinds D))</span></p></td></tr><tr><td><p><span class="stt">'E</span></p></td></tr><tr><td><p><span class="stt">&gt; (@ show E)</span></p></td></tr><tr><td><p><span class="stt">(% E</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(kinds (D)))</span></p></td></tr></table></p><p>Object&rsquo;s implementing <span class="stt">&#953;-props</span> and <span class="stt">&#956;-props</span> interfaces can choose to not assert the interface at the time of their construction.</p><ul><li><p><span class="stt">&#956;-props-assert!</span> is applied first to provide the object a chance to populate its directly-defined property list with required properties.</p></li><li><p><span class="stt">(&#953;-props-assert</span> is applied after <span class="stt">&#956;-props-assert!</span> to ensure the object provides the required properties.</p></li></ul><h5>5.3.2<tt>&nbsp;</tt><a name="(part._.Implementing__-props_objects)"></a>Implementing &#949;-props objects</h5><p>Sometimes it is desirable that an object <span style="font-style: italic">not</span> define certain properties. This is useful when the object serves as a kind of &rsquo;template&rsquo;, where the <span class="stt">&#949;-props</span> interfaces ensure the object will not define properties at registration that will later be overridden by object construction.</p><p>&rsquo;Existential properties&rsquo; interfaces are asserted after the object is registered, but before its <span class="stt">construct</span> is invoked. If the object directly defines the properties of the <span class="stt">&#949;-props</span> interface, then an error is thrown.</p><p>The <span class="stt">&#949;-props</span> flag can be removed from an implementation chain with the <span class="stt">~</span> prefixed to the <span style="font-style: italic">ntf</span> object name.</p><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (% A (flags &#949;-props) (p0 undefined))</span></p></td></tr><tr><td><p><span class="stt">'A</span></p></td></tr><tr><td><p><span class="stt">&gt; (% B (implements A))</span></p></td></tr><tr><td><p><span class="stt">'B</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (kinds B) (p0 42))</span></p></td></tr><tr><td><p><span class="stt">C must not define &#949;-props A property p0</span></p></td></tr><tr><td><p><span class="stt">&gt; (% C (kinds B) (p0 42) (implements ~A))</span></p></td></tr><tr><td><p><span class="stt">'C</span></p></td></tr></table></div></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Registering_Objects.html" title="backward to &quot;4 Registering Objects&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Conspiracy Library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Special_Property_Values.html" title="forward to &quot;6 Special Property Values&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>